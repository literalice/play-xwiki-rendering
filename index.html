<!DOCTYPE html>
<html>

  <head>
    <meta charset='utf-8' />
    <meta http-equiv="X-UA-Compatible" content="chrome=1" />
    <meta name="description" content="play-xwiki-rendering : Play2 module allows you to convert texts written in a certain wiki syntax to some formatted texts using XWiki Rendering Framework." />

    <link rel="stylesheet" type="text/css" media="screen" href="stylesheets/stylesheet.css">

    <title>play-xwiki-rendering</title>
  </head>

  <body>

    <!-- HEADER -->
    <div id="header_wrap" class="outer">
        <header class="inner">
          <a id="forkme_banner" href="https://github.com/literalice/play-xwiki-rendering">View on GitHub</a>

          <h1 id="project_title">play-xwiki-rendering</h1>
          <h2 id="project_tagline">Play2 module allows you to convert texts written in a certain wiki syntax to some formatted texts using XWiki Rendering Framework.</h2>

            <section id="downloads">
              <a class="zip_download_link" href="https://github.com/literalice/play-xwiki-rendering/zipball/master">Download this project as a .zip file</a>
              <a class="tar_download_link" href="https://github.com/literalice/play-xwiki-rendering/tarball/master">Download this project as a tar.gz file</a>
            </section>
        </header>
    </div>

    <!-- MAIN CONTENT -->
    <div id="main_content_wrap" class="outer">
      <section id="main_content" class="inner">
        <h1>Play2 XWiki Rendering Module</h1>

<h2>Introduction</h2>

<p>This Play2 module allows you to convert texts written in a certain wiki syntax to some formatted texts using XWiki Rendering Framework.</p>
<h3>Example</h3>

<div class="highlight"><pre><span class="k">val</span> <span class="n">result</span> <span class="k">=</span> <span class="nc">DefaultXWikiRenderer</span><span class="o">.</span><span class="n">render</span><span class="o">(</span><span class="s">"** Bold ** {{code type="</span><span class="n">java</span><span class="s">"}}class Macro{}{{/code}}"</span><span class="o">)</span>
<span class="c1">// &lt;p&gt;&lt;b&gt;Bold&lt;/b&gt;&lt;pre class="java"&gt;class Macro{}&lt;/pre&gt;&lt;/p&gt;</span>
</pre></div>

<p>
There is a <a href="https://github.com/literalice/play-xwiki-rendering/tree/master/samples/play-xwiki-rendering-sample">sample application</a> at the project repository.
<br />
And the api documents are <a href="api/index.html#com.monochromeroad.play.xwiki.rendering.package">here</a>.
</p>
<p>
See also <a href="http://rendering.xwiki.org/xwiki/bin/view/Main/WebHome">XWiki Rendering Framework</a> for the details about the framework.</p>

<h2>Installing the module</h2>

<p>To use the module, a repository and dependency should be added to your <a href="https://github.com/literalice/play-xwiki-rendering/blob/master/samples/play-xwiki-rendering-sample/project/Build.scala">project/Build.scala</a></p>

<dl>
<dt>Repository</dt>
    <dd>http://repository-monochromeroad.forge.cloudbees.com/release</dd>
    <dt>Dependency</dt>
    <dd>"com.monochromeroad" %% "play-xwiki-rendering" % "1.0"</dd>
</dl><div class="highlight"><pre><span class="k">object</span> <span class="nc">ApplicationBuild</span> <span class="k">extends</span> <span class="nc">Build</span> <span class="o">{</span>

  <span class="k">val</span> <span class="n">appName</span>         <span class="k">=</span> <span class="s">"Sample application integrated with XWiki Rendering"</span>
  <span class="k">val</span> <span class="n">appVersion</span>      <span class="k">=</span> <span class="s">"1.0"</span>

  <span class="k">val</span> <span class="n">appDependencies</span> <span class="k">=</span> <span class="nc">Seq</span><span class="o">(</span>
    <span class="s">"com.monochromeroad"</span> <span class="o">%%</span> <span class="s">"play-xwiki-rendering"</span> <span class="o">%</span> <span class="s">"1.0"</span>
  <span class="o">)</span>

  <span class="k">val</span> <span class="n">main</span> <span class="k">=</span> <span class="nc">PlayProject</span><span class="o">(</span><span class="n">appName</span><span class="o">,</span> <span class="n">appVersion</span><span class="o">,</span> <span class="n">appDependencies</span><span class="o">,</span> <span class="n">mainLang</span> <span class="k">=</span> <span class="nc">SCALA</span><span class="o">).</span><span class="n">settings</span><span class="o">(</span>
    <span class="n">resolvers</span> <span class="o">+=</span> <span class="s">"Monochrmeroad CloudBees Repository"</span> <span class="n">at</span> <span class="s">"http://repository-monochromeroad.forge.cloudbees.com/release"</span>
  <span class="o">)</span>
<span class="o">}</span>
</pre></div>

<h2>Default XWiki renderer</h2>

<p>This moudle provides some XWiki rendereres as a Play plugin.</p>

<dl>
    <dt><a href="api/index.html#com.monochromeroad.play.xwiki.rendering.plugin.DefaultXWikiRenderer$">DefaultXWikiRenderer</a></dt>
    <dd>XDOM based renderer</dd>
    <dt><a href="api/index.html#com.monochromeroad.play.xwiki.rendering.plugin.DefaultXWikiStreamRenderer$">DefaultXWikiStreamRenderer</a></dt>
    <dd>Streaming based renderer</dd>
    <dt><a href="api/index.html#com.monochromeroad.play.xwiki.rendering.plugin.DefaultXWikiStringStreamRenderer$">DefaultXWikiStringStreamRenderer</a></dt>
    <dd>Simplified streaming based renderer</dd>
</dl>

<h3>Installing the default renderers</h3>

<p>Just add a entry to the "plugins.sbt" in the conf directory.</p>

<pre><code>10000:com.monochromeroad.play.xwiki.rendering.plugin.DefaultXWikiRenderingPlugin
</code></pre>

<h3>DefaultXWikiRenderer</h3>

<div class="highlight"><pre><span class="k">import</span> <span class="nn">com.monochromeroad.play.xwiki.rendering.plugin.</span><span class="o">{</span><span class="nc">DefaultXWikiRenderer</span> <span class="k">=&gt;</span> <span class="nc">Renderer</span><span class="o">}</span>
<span class="k">object</span> <span class="nc">Application</span> <span class="k">extends</span> <span class="nc">Controller</span> <span class="o">{</span>

  <span class="k">def</span> <span class="n">index</span> <span class="k">=</span> <span class="nc">Action</span> <span class="o">{</span>
    <span class="k">val</span> <span class="n">htmlText</span> <span class="k">=</span> <span class="nc">Renderer</span><span class="o">.</span><span class="n">render</span><span class="o">(</span><span class="s">"**TEST** //italic//"</span><span class="o">)</span>

    <span class="c1">// ...</span>
  <span class="o">}</span>
<span class="o">}</span>
</pre></div>

<h3>DefaultXWikiStreamRenderer</h3>

<div class="highlight"><pre><span class="k">import</span> <span class="nn">java.io.StringReader</span>
<span class="k">import</span> <span class="nn">com.monochromeroad.play.xwiki.rendering.plugin.</span><span class="o">{</span><span class="nc">DefaultXWikiStreamRenderer</span> <span class="k">=&gt;</span> <span class="nc">Renderer</span><span class="o">}</span>
<span class="k">object</span> <span class="nc">Application</span> <span class="k">extends</span> <span class="nc">Controller</span> <span class="o">{</span>

  <span class="k">def</span> <span class="n">index</span> <span class="k">=</span> <span class="nc">Action</span> <span class="o">{</span>
    <span class="k">val</span> <span class="n">sourceReader</span> <span class="k">=</span> <span class="k">new</span> <span class="nc">StringReader</span><span class="o">(</span><span class="s">"**TEST** //italic//"</span><span class="o">)</span>
    <span class="k">val</span> <span class="n">htmlText</span> <span class="k">=</span> <span class="nc">Renderer</span><span class="o">.</span><span class="n">render</span><span class="o">(</span><span class="n">sourceReader</span><span class="o">,</span> <span class="s">"-- iv --"</span><span class="o">,</span> <span class="o">(</span><span class="n">acc</span><span class="k">:</span> <span class="kt">String</span><span class="o">,</span> <span class="n">n</span><span class="k">:</span> <span class="kt">String</span><span class="o">)</span> <span class="k">=&gt;</span> <span class="n">acc</span> <span class="o">+</span> <span class="n">n</span><span class="o">)</span>

    <span class="c1">// ...</span>
  <span class="o">}</span>
<span class="o">}</span>
</pre></div>

<h3>DefaultXWikiStringStreamRenderer</h3>

<div class="highlight"><pre><span class="k">import</span> <span class="nn">java.io.StringReader</span>
<span class="k">import</span> <span class="nn">com.monochromeroad.play.xwiki.rendering.plugin.</span><span class="o">{</span><span class="nc">DefaultXWikiStringStreamRenderer</span> <span class="k">=&gt;</span> <span class="nc">Renderer</span><span class="o">}</span>
<span class="k">object</span> <span class="nc">Application</span> <span class="k">extends</span> <span class="nc">Controller</span> <span class="o">{</span>

  <span class="k">def</span> <span class="n">index</span> <span class="k">=</span> <span class="nc">Action</span> <span class="o">{</span>
    <span class="k">val</span> <span class="n">sourceReader</span> <span class="k">=</span> <span class="k">new</span> <span class="nc">StringReader</span><span class="o">(</span><span class="s">"**TEST** //italic//"</span><span class="o">)</span>
    <span class="k">val</span> <span class="n">result</span> <span class="k">=</span> <span class="k">new</span> <span class="nc">StringBuilder</span><span class="o">()</span>
    <span class="nc">Renderer</span><span class="o">.</span><span class="n">render</span><span class="o">(</span><span class="n">sourceReader</span><span class="o">,</span> <span class="n">result</span><span class="o">.</span><span class="n">append</span><span class="o">(</span><span class="k">_</span><span class="o">))</span>

    <span class="c1">// ...</span>
  <span class="o">}</span>
<span class="o">}</span>
</pre></div>

<h3>Macros</h3>

<p>You can use some XWiki macros to extend the wiki syntax.</p>

<div class="highlight"><pre><span class="k">import</span> <span class="nn">com.monochromeroad.play.xwiki.rendering.plugin.</span><span class="o">{</span><span class="nc">DefaultXWikiRenderer</span> <span class="k">=&gt;</span> <span class="nc">Renderer</span><span class="o">}</span>
<span class="k">object</span> <span class="nc">Application</span> <span class="k">extends</span> <span class="nc">Controller</span> <span class="o">{</span>

  <span class="k">def</span> <span class="n">index</span> <span class="k">=</span> <span class="nc">Action</span> <span class="o">{</span>
    <span class="k">val</span> <span class="n">htmlText</span> <span class="k">=</span> <span class="nc">Renderer</span><span class="o">.</span><span class="n">render</span><span class="o">(</span><span class="s">"**TEST** {{comment}}This is a comment that would not be contained in the result{{/comment}}"</span><span class="o">)</span>
    <span class="c1">// Comment Macro: &lt;p&gt;&lt;b&gt;TEST&lt;/b&gt; &lt;/p&gt;</span>

    <span class="c1">// ...</span>
  <span class="o">}</span>
<span class="o">}</span>
</pre></div>

<p>To use a XWiki macro, add a macro jar to your project or register a macro source code.</p>

<h4>Adding a macro jar</h4>

<p>Just add the macro jar you want to use in the project.</p>

<div class="highlight"><pre><span class="k">val</span> <span class="n">appDependencies</span> <span class="k">=</span> <span class="nc">Seq</span><span class="o">(</span>
  <span class="s">"org.xwiki.rendering"</span> <span class="o">%</span> <span class="s">"xwiki-rendering-macro-comment"</span> <span class="o">%</span> <span class="s">"4.1.3"</span>
<span class="o">)</span>
</pre></div>

<p>See also about <a href="http://rendering.xwiki.org/xwiki/bin/view/Main/Macros">XWiki official macros</a>.</p>

<h4>Registering a macro code</h4>

<p>First, write a macro class that extends <a href="api/index.html#com.monochromeroad.play.xwiki.rendering.plugin.DefaultXWikiMacro">DefaultXWikiMacro</a> or <a href="api/index.html#com.monochromeroad.play.xwiki.rendering.plugin.DefaultXWikiNoParameterMacro">DefaultXWikiNoParameterMacro</a>
<br />
You need to create the class with a nullary constructor.</p>

<p>Check out the sample macro code for more details.</p>

<ul>
    <li><a href="https://github.com/literalice/play-xwiki-rendering/blob/master/samples/play-xwiki-rendering-sample/app/utils/xwiki/macros/CodeMacro.scala">Code Macro extends DefaultXWikiMacro</a></li>
    <li><a href="https://github.com/literalice/play-xwiki-rendering/blob/master/samples/play-xwiki-rendering-sample/app/utils/xwiki/macros/DateMacro.scala">Date Macro extends DefaultNoParameterMacro</a></li>
</ul>

<p>Then regster the macro class in the <a href="https://github.com/literalice/play-xwiki-rendering/blob/master/samples/play-xwiki-rendering-sample/conf/application.conf">conf/application.conf</a></p>

<pre><code>xwiki.rendering.default.macros.1=utils.xwiki.macros.CodeMacro</code></pre>

<p>When you create your own macro, the XWiki site document would be useful:<br />
<a href="http://rendering.xwiki.org/xwiki/bin/view/Main/ExtendingMacro">Writing a Macro</a>
</p>

<h2>License</h2>

<p>LGPL Version 2.1</p>
      </section>
    </div>

    <!-- FOOTER  -->
    <div id="footer_wrap" class="outer">
      <footer class="inner">
        <p class="copyright">Play-xwiki-rendering maintained by <a href="https://github.com/literalice">literalice</a></p>
        <p>Published with <a href="http://pages.github.com">GitHub Pages</a></p>
      </footer>
    </div>

    

  </body>
</html>
